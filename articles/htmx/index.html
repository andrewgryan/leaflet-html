
  

<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
  </style>
    <link rel="stylesheet" href="/style.css" />
    <link rel="stylesheet" href="/leaflet-html/style.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <script type="importmap">
      {
        "imports": {
          "leaflet": "https://unpkg.com/leaflet@1.9.4/dist/leaflet-src.esm.js",
          "leaflet-html": "https://unpkg.com/leaflet-html@latest/dist/leaflet-html.js"
        }
      }
    </script>
    <script type="module">
      import "leaflet-html";
    </script>
    <script src="https://code.iconify.design/iconify-icon/2.1.0/iconify-icon.min.js"></script>
</head>
<body>
<nav>
<div>
  <a href="https://andrewgryan.github.io/leaflet-html/"><iconify-icon icon="mdi:home"></iconify-icon> Home</a>
  <a href="https://andrewgryan.github.io/leaflet-html/articles/"><iconify-icon icon="material-symbols:article-outline-sharp"></iconify-icon> Articles</a>
  <a href="https://andrewgryan.github.io/leaflet-html/api/"><iconify-icon icon="material-symbols:api"></iconify-icon> API</a>
</div>
<a href="Https://GitHub.com/andrewgryan/leaflet-html"><iconify-icon icon="mdi:github"></iconify-icon></a>
</nav>

<main>
  <h1>Working with HTMX</h1>
  <p>To add HTMX to a project.
Add a script tag to pull the library into your page.</p>
<pre data-lang="html" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-html "><code class="language-html" data-lang="html"><span style="color:#6486ab;">&lt;script src=</span><span style="color:#d07711;">&quot;https://unpkg.com/htmx.org@1.9.12&quot;</span><span style="color:#6486ab;">&gt;&lt;/script&gt;
</span><span style="color:#7f8989;">&lt;!-- have a button POST a click via AJAX --&gt;
</span><span style="color:#7f902a;">&lt;button hx-get=</span><span style="color:#d07711;">&quot;/clicked&quot; </span><span style="color:#7f902a;">hx-swap=</span><span style="color:#d07711;">&quot;outerHTML&quot;</span><span style="color:#7f902a;">&gt;
</span><span>  Click Me
</span><span style="color:#7f902a;">&lt;/button&gt;
</span></code></pre>
<script src="https://unpkg.com/htmx.org@1.9.12"></script>
<button hx-get=https://andrewgryan.github.io/leaflet-html/htmx/clicked.html
 hx-swap="outerHTML">
  Click Me
</button>
<h2 id="use-with-leaflet-html">Use with Leaflet-HTML</h2>
<p>The principles that govern HTMX development also hold for Leaflet-HTML.
A button that requests HTML to replace part of the document should update the map.</p>
<pre data-lang="html" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-html "><code class="language-html" data-lang="html"><span style="color:#7f8989;">&lt;!-- Initial map --&gt;
</span><span style="color:#6486ab;">&lt;l-map center=</span><span style="color:#d07711;">&quot;[55,-5]&quot; </span><span style="color:#6486ab;">zoom=</span><span style="color:#d07711;">&quot;4&quot;</span><span style="color:#6486ab;">&gt;
</span><span>  </span><span style="color:#6486ab;">&lt;l-tile-layer
</span><span style="color:#6486ab;">    url-template=</span><span style="color:#d07711;">&quot;https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png&quot;
</span><span style="color:#6486ab;">  &gt;&lt;/l-tile-layer&gt;
</span><span style="color:#6486ab;">&lt;/l-map&gt;
</span><span>
</span><span style="color:#7f8989;">&lt;!-- Tiles --&gt;
</span><span style="color:#7f902a;">&lt;button hx-get=</span><span style="color:#d07711;">&quot;/tile-osm.html&quot; </span><span style="color:#7f902a;">hx-target=</span><span style="color:#d07711;">&quot;l-tile-layer&quot; </span><span style="color:#7f902a;">hx-swap=</span><span style="color:#d07711;">&quot;outerHTML&quot;</span><span style="color:#7f902a;">&gt;
</span><span>  OSM
</span><span style="color:#7f902a;">&lt;/button&gt;
</span><span style="color:#7f902a;">&lt;button hx-get=</span><span style="color:#d07711;">&quot;/tile-voyager.html&quot; </span><span style="color:#7f902a;">hx-target=</span><span style="color:#d07711;">&quot;l-tile-layer&quot; </span><span style="color:#7f902a;">hx-swap=</span><span style="color:#d07711;">&quot;outerHTML&quot;</span><span style="color:#7f902a;">&gt;
</span><span>  Voyager
</span><span style="color:#7f902a;">&lt;/button&gt;
</span><span style="color:#7f902a;">&lt;button hx-get=</span><span style="color:#d07711;">&quot;/tile-esri.html&quot; </span><span style="color:#7f902a;">hx-target=</span><span style="color:#d07711;">&quot;l-tile-layer&quot; </span><span style="color:#7f902a;">hx-swap=</span><span style="color:#d07711;">&quot;outerHTML&quot;</span><span style="color:#7f902a;">&gt;
</span><span>  ESRI
</span><span style="color:#7f902a;">&lt;/button&gt;
</span><span>
</span><span style="color:#7f8989;">&lt;!-- Marker --&gt;
</span><span style="color:#7f902a;">&lt;button hx-get=</span><span style="color:#d07711;">&quot;/marker.html&quot; </span><span style="color:#7f902a;">hx-target=</span><span style="color:#d07711;">&quot;l-map&quot; </span><span style="color:#7f902a;">hx-swap=</span><span style="color:#d07711;">&quot;beforeend&quot;</span><span style="color:#7f902a;">&gt;
</span><span>  Add marker
</span><span style="color:#7f902a;">&lt;/button&gt;
</span><span style="color:#7f902a;">&lt;button hx-get=</span><span style="color:#d07711;">&quot;/marker.html&quot; </span><span style="color:#7f902a;">hx-target=</span><span style="color:#d07711;">&quot;l-marker&quot; </span><span style="color:#7f902a;">hx-swap=</span><span style="color:#d07711;">&quot;delete&quot;</span><span style="color:#7f902a;">&gt;
</span><span>  Delete marker
</span><span style="color:#7f902a;">&lt;/button&gt;
</span></code></pre>
<l-map center="[55,-5]" zoom="4">
  <l-tile-layer
    url-template="https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png"
  ></l-tile-layer>
</l-map>
<button hx-get=https://andrewgryan.github.io/leaflet-html/htmx/tile-osm.html
 hx-target="l-tile-layer" hx-swap="outerHTML">
  OSM
</button>
<button hx-get=https://andrewgryan.github.io/leaflet-html/htmx/tile-voyager.html
 hx-target="l-tile-layer" hx-swap="outerHTML">
  Voyager
</button>
<button hx-get=https://andrewgryan.github.io/leaflet-html/htmx/tile-esri.html
 hx-target="l-tile-layer" hx-swap="outerHTML">
  ESRI
</button>
<button hx-get=https://andrewgryan.github.io/leaflet-html/htmx/marker.html
 hx-target="l-map" hx-swap="beforeend">
  Add marker
</button>
<button hx-get=https://andrewgryan.github.io/leaflet-html/htmx/marker.html
 hx-target="l-marker" hx-swap="delete">
  Delete marker
</button>
<p>The above approach works by triggering the change handlers in the <code>&lt;l-tile-layer&gt;</code> custom element.
The additional HTML tags generated by Leaflet are also inside the <code>&lt;l-map&gt;</code> tag.
Care should be taken to not <code>hx-swap</code> the tags governed by Leaflet.</p>
<p>All Leaflet-HTML tags, e.g. <code>&lt;l-marker&gt;</code>, <code>&lt;l-icon&gt;</code>, etc. can be swapped however you like.
It is just the contents of <code>&lt;l-map&gt;</code> that needs careful consideration.</p>
<p>A more elegant mechanism in the future will make it clear which part of the document is controlled by Leaflet.</p>
<h3 id="marker-as-a-hypermedia-control">Marker as a hypermedia control</h3>
<pre data-lang="html" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-html "><code class="language-html" data-lang="html"><span>  </span><span style="color:#6486ab;">&lt;l-marker
</span><span style="color:#6486ab;">    lat-lng=</span><span style="color:#d07711;">&quot;[55,-5]&quot;
</span><span style="color:#6486ab;">    on=</span><span style="color:#d07711;">&quot;click&quot;
</span><span style="color:#6486ab;">    hx-trigger=</span><span style="color:#d07711;">&quot;click&quot;
</span><span style="color:#6486ab;">    hx-target=</span><span style="color:#d07711;">&quot;#placeholder&quot;
</span><span style="color:#6486ab;">    hx-get=</span><span style="color:#d07711;">&quot;/clicked&quot;</span><span style="color:#6486ab;">&gt;&lt;/l-marker&gt;
</span><span>
</span><span>  </span><span style="color:#6486ab;">&lt;div id=</span><span style="color:#d07711;">&quot;placeholder&quot;</span><span style="color:#6486ab;">&gt;</span><span>Hello, World!</span><span style="color:#6486ab;">&lt;/div&gt;
</span></code></pre>
<div id="placeholder"><h2>Hello, World!</h2></div>
<p>When the marker is clicked HTMX replaces the content of the above heading.</p>
<l-map center="[55,-5]" zoom="4">
  <l-tile-layer
    url-template="https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png"
  ></l-tile-layer>
<l-marker
    lat-lng="[55,-5]"
    on="click"
    hx-trigger="click"
    hx-target="#placeholder"
    hx-get=https://andrewgryan.github.io/leaflet-html/htmx/clicked.html

></l-marker>
</l-map>
<p>Leaflet-HTML connects Leaflet's event system to browser native DOM events.
HTMX uses browser DOM events to orchestrate network requests and DOM updates.</p>

</main>

<footer>
  <div class="logo">Leaflet-HTML</div>
</footer>
</body>
</html>
