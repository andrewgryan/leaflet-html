<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Leaflet HTML</title>
    <meta charset="utf-8" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
    <script
      src="https://www.unpkg.com/leaflet-html@0.1.4/dist/leaflet-html.umd.js"
      defer
    ></script>
    <style>
      * {
        margin: 0;
      }

      [data-leaflet-html] {
        block-size: 100vh;
        isolation: isolate;
        z-index: 1;
      }

      #btn {
        z-index: 2;
        position: absolute;
        bottom: 0;
        left: 0;
        margin: 1rem;
        padding: 1rem;
        background-color: #337;
        color: white;
        border-radius: 0.25rem;
        cursor: pointer;
        font-size: 1.2rem;
      }
    </style>
  </head>
  <body>
    <div data-leaflet-html data-center="[39.61, -105.02]" data-zoom="10">
      <div data-control-layers>
        <div data-base-maps>
          <div
            data-tile-layer
            data-name="OpenStreetMap"
            data-url-template="https://tile.openstreetmap.org/{z}/{x}/{y}.png"
            data-attribution='&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
            data-max-zoom="12"
          ></div>
          <div
            data-tile-layer
            data-name="Toner"
            data-url-template="https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}{r}.png"
            data-attribution=""
            data-max-zoom="12"
            data-show
          ></div>
        </div>
        <div data-overlay-maps>
          <div data-layer-group data-name="Cities">
            <div data-marker data-lat-lng="[39.61, -105.02]">
              <div data-popup data-content="This is Littleton, CO."></div>
            </div>
            <div data-marker data-lat-lng="[39.74, -104.99]">
              <div data-popup data-content="This is Denver, CO."></div>
            </div>
            <div data-marker data-lat-lng="[39.73, -104.8]" data-opacity="0.7">
              <div data-popup data-content="This is Aurora, CO."></div>
            </div>
            <div data-marker data-lat-lng="[39.77, -105.23]">
              <div data-popup data-content="This is Golden, CO."></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <button id="btn">Add a city</button>
    <script type="module">
      // Manual tests
      document.getElementById("btn").addEventListener("click", () => {
        // New city
        let el = document.querySelector('[data-name="Cities"]');
        const city = document.createElement("div");
        city.dataset.marker = "";
        city.dataset.latLng = "[39.60, -105.02]";
        el.appendChild(city);

        // Remove Denver
        el = document.querySelector('[data-lat-lng="[39.74, -104.99]"]');
        el.remove();
      });
    </script>
  </body>
</html>
